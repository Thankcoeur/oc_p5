(()=>{"use strict";var e,t,r,a,n,o={291:(e,t,r)=>{r.d(t,{m:()=>a});class a{AddItem(e,t){if("string"!=typeof e)throw new Error("le parametre id  doit etre de type string ");t=this.recupererData(),this.getIndex(e,t)<0&&(t.push(e),this.updateData(t))}removeItem(e,t){if(console.log(e),"string"!=typeof e)throw new Error("le parametre id n'est pas une chaine de caractere");if(this.getIndex(e,t)<0)throw new Error("le produit a suprimer n' existe pas");if(null==t)throw new Error("aucune donnée");t.splice(this.getIndex(e,t),1),this.updateData(t)}getIndex(e,t){return t.findIndex((t=>t==e))}just(e){return e}recupererData(){return null!=window.localStorage.getItem("panier")||Array.isArray(JSON.parse(window.localStorage.getItem("panier")))||window.localStorage.setItem("panier","[]"),JSON.parse(window.localStorage.getItem("panier"))}updateData(e){var t=JSON.stringify(e);window.localStorage.setItem("panier",t)}}},593:(e,t,r)=>{r.d(t,{sA:()=>a,jV:()=>n});const a=async(e,t="http://localhost:3000/api/cameras/order")=>{const r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return await r.json()},n=async e=>{let t=await fetch("http://localhost:3000/api/cameras/"+e);return await t.json()}}},i={};function d(e){if(i[e])return i[e].exports;var t=i[e]={exports:{}};return o[e](t,t.exports,d),t.exports}d.d=(e,t)=>{for(var r in t)d.o(t,r)&&!d.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},d.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e=d(291),t=d(593),r=new e.m,a=document.getElementsByTagName("tbody")[0],n=0,function e(){a.innerHTML="",n=0;var o=r.recupererData();document.getElementById("prix_total").innerText=n+" €",o.forEach((o=>{(async()=>{!function(t){var o=document.createElement("tr");o.setAttribute("data-id",t._id);var i=document.createElement("td");i.innerText=t.name;var d=document.createElement("td");d.innerText=t.price+" €";var c=document.createElement("td");c.innerHTML="<btn>remove</btn>",c.addEventListener("click",(()=>{var a=document.querySelectorAll('[data-id="'+t._id+'"]')[0];r.removeItem(t._id,r.recupererData()),console.log(n),a.remove(),e()})),n+=t.price,o.append(i,d,c),a.append(o)}(await(0,t.jV)(o)),document.getElementById("prix_total").innerText=n+" €"})(),document.getElementById("prix_total").innerText=n+" €"}))}(),document.getElementById("form").addEventListener("submit",(function(e){e.preventDefault(),function(){let e=document.getElementsByClassName("form__input"),a={contact:{firstName:e[0].value,lastName:e[1].value,email:e[2].value,tel:e[3].value,address:e[4].value,city:e[5].value},products:r.recupererData()};(async()=>{var e=await(0,t.sA)(a);window.localStorage.setItem("orderId",e.orderId),window.localStorage.setItem("totalAmount",n.toString()),window.open("confirmation_de_commande.html")})()}()}))})();