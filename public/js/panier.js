(()=>{"use strict";var e,t,r,o,a,n={752:(e,t,r)=>{r.d(t,{F:()=>n});var o=r(291),a=r(342);class n{static getLocalStorage(){return null==n.LocalStorage_?(n.LocalStorage_=new o.m,n.LocalStorage_):n.LocalStorage_}static getProductStorage(){return null==n.ProductStorage_?(n.ProductStorage_=new a.A,n.ProductStorage_):n.ProductStorage_}}n.LocalStorage_=null,n.ProductStorage_=null},291:(e,t,r)=>{r.d(t,{m:()=>o});class o{constructor(){}static recupererData(){return JSON.parse(window.localStorage.getItem("panier"))}static enregistrer(e){window.localStorage.setItem("panier",JSON.stringify(e))}}!function(e,t,r,o){var a,n=arguments.length,c=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,o);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(c=(n<3?a(c):n>3?a(t,r,c):a(t,r))||c);n>3&&c&&Object.defineProperty(t,r,c)}([function(e,t){let r=null;Object.defineProperty(e,t,{get:function(){return r=o.recupererData(),r},set:function(e){o.enregistrer(e),r=e}})}],o.prototype,"data",void 0)},342:(e,t,r)=>{r.d(t,{A:()=>o});class o{AddItem(e,t){let r=[...t];return r.push(e),r}removeItem(e,t){let r=[...t];return console.log(r.splice(this.getIndex(e,r),1)),r.splice(this.getIndex(e,r),1)}getIndex(e,t){return[...t].findIndex((t=>t==e))}}},593:(e,t,r)=>{r.d(t,{sA:()=>o,jV:()=>a});const o=async(e,t="http://localhost:3000/api/cameras/order")=>{console.log("data",e);const r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return console.log(r),await r.json()},a=async e=>{let t=await fetch("http://localhost:3000/api/cameras/"+e);return await t.json()}}},c={};function l(e){var t=c[e];if(void 0!==t)return t.exports;var r=c[e]={exports:{}};return n[e](r,r.exports,l),r.exports}l.d=(e,t)=>{for(var r in t)l.o(t,r)&&!l.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e=l(593),(t=l(752)).F.getProductStorage(),r=t.F.getLocalStorage(),o=document.getElementsByTagName("tbody")[0],a=0,function r(){o.innerHTML="",a=0;var n=t.F.getLocalStorage().data;document.getElementById("prix_total").innerText=a+" €",n.forEach((t=>{(async()=>{!function(e){var t=document.createElement("tr");t.setAttribute("data-id",e._id);var n=document.createElement("td");n.innerText=e.name;var c=document.createElement("td");c.innerText=e.price+" €";var l=document.createElement("td");l.innerHTML='<i class="fas fa-trash"></i>',l.addEventListener("click",(()=>{document.querySelectorAll('[data-id="'+e._id+'"]')[0],r()})),a+=e.price,t.append(n,c,l),o.append(t)}(await(0,e.jV)(t)),document.getElementById("prix_total").innerText=a+" €"})(),document.getElementById("prix_total").innerText=a+" €"}))}(),document.getElementById("form").addEventListener("submit",(function(t){t.preventDefault(),function(){let t=document.getElementsByClassName("form__input"),o={contact:{firstName:t[0].value,lastName:t[1].value,email:t[2].value,tel:t[3].value,address:t[4].value,city:t[5].value},products:r.data};console.log(o),(async()=>{var t=await(0,e.sA)(o);console.log("post :",t),window.localStorage.setItem("orderId",t.orderId),window.localStorage.setItem("totalAmount",a.toString()),window.open("confirmation_de_commande.html")})()}()}))})();